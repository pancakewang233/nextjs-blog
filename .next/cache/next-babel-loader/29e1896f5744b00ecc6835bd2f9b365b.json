{"ast":null,"code":"import { getDatabaseConnection } from '../../../lib/getDatabaseConnection';\nimport { User } from \"src/entity/User\";\n\nconst Users = async (req, res) => {\n  const {\n    username,\n    password,\n    passwordConfirmation\n  } = req.body;\n  const connection = await getDatabaseConnection();\n  const user = new User();\n  user.username = user;\n\n  if (password !== passwordConfirmation) {\n    const errors = {\n      passwordConfirmation: ['密码不匹配']\n    };\n    res.statusCode = 422;\n    res.setHeader('Content-Type', 'application/json');\n    res.write(JSON.stringify(errors));\n    res.end();\n  }\n\n  res.statusCode = 200;\n  res.setHeader('Content-Type', 'application/json');\n  res.write(JSON.stringify(''));\n  res.end();\n};\n\nexport default Users;","map":{"version":3,"sources":["D:/Pank/code/Pack/nextjs-blog/pages/api/v1/users.tsx"],"names":["getDatabaseConnection","User","Users","req","res","username","password","passwordConfirmation","body","connection","user","errors","statusCode","setHeader","write","JSON","stringify","end"],"mappings":"AACA,SAAQA,qBAAR,QAAoC,oCAApC;AACA,SAASC,IAAT,QAAqB,iBAArB;;AAEA,MAAMC,KAAK,GAAG,OAAMC,GAAN,EAA2BC,GAA3B,KAAoD;AAChE,QAAM;AAACC,IAAAA,QAAD;AAAWC,IAAAA,QAAX;AAAqBC,IAAAA;AAArB,MAA6CJ,GAAG,CAACK,IAAvD;AACA,QAAMC,UAAU,GAAG,MAAMT,qBAAqB,EAA9C;AACA,QAAMU,IAAI,GAAG,IAAIT,IAAJ,EAAb;AACAS,EAAAA,IAAI,CAACL,QAAL,GAAgBK,IAAhB;;AACA,MAAGJ,QAAQ,KAAKC,oBAAhB,EAAsC;AACpC,UAAMI,MAAM,GAAG;AAACJ,MAAAA,oBAAoB,EAAE,CAAC,OAAD;AAAvB,KAAf;AACAH,IAAAA,GAAG,CAACQ,UAAJ,GAAiB,GAAjB;AACAR,IAAAA,GAAG,CAACS,SAAJ,CAAc,cAAd,EAA8B,kBAA9B;AACAT,IAAAA,GAAG,CAACU,KAAJ,CAAUC,IAAI,CAACC,SAAL,CAAeL,MAAf,CAAV;AACAP,IAAAA,GAAG,CAACa,GAAJ;AACD;;AACDb,EAAAA,GAAG,CAACQ,UAAJ,GAAiB,GAAjB;AACAR,EAAAA,GAAG,CAACS,SAAJ,CAAc,cAAd,EAA8B,kBAA9B;AACAT,EAAAA,GAAG,CAACU,KAAJ,CAAUC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAV;AACAZ,EAAAA,GAAG,CAACa,GAAJ;AACD,CAhBD;;AAkBA,eAAef,KAAf","sourcesContent":["import { NextApiRequest, NextApiResponse } from \"next\";\r\nimport {getDatabaseConnection} from '../../../lib/getDatabaseConnection';\r\nimport { User } from \"src/entity/User\";\r\n\r\nconst Users = async(req: NextApiRequest, res: NextApiResponse) => {\r\n  const {username, password, passwordConfirmation} = req.body\r\n  const connection = await getDatabaseConnection()\r\n  const user = new User()\r\n  user.username = user\r\n  if(password !== passwordConfirmation) {\r\n    const errors = {passwordConfirmation: ['密码不匹配']}\r\n    res.statusCode = 422\r\n    res.setHeader('Content-Type', 'application/json')\r\n    res.write(JSON.stringify(errors))\r\n    res.end()\r\n  }\r\n  res.statusCode = 200\r\n  res.setHeader('Content-Type', 'application/json')\r\n  res.write(JSON.stringify(''))\r\n  res.end()\r\n}\r\n\r\nexport default Users;\r\n"]},"metadata":{},"sourceType":"module"}