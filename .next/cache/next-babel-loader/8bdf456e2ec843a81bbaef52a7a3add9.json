{"ast":null,"code":"import { SignIn } from '../../../src/model/SignIn';\n\nconst Sessions = async (req, res) => {\n  const {\n    username,\n    password\n  } = req.body;\n  res.setHeader('Content-Type', 'application/json;charset=utf-8');\n  const signIn = new SignIn();\n  signIn.username = username;\n  signIn.password = password;\n  await signIn.validate();\n\n  if (signIn.hasErrors()) {\n    res.statusCode = 422;\n    res.end(JSON.stringify(signIn.errors));\n  } else {\n    res.statusCode = 200;\n    res.end(JSON.stringify(signIn.user));\n  }\n};\n\nexport default Sessions;","map":{"version":3,"sources":["D:/Pank/code/Pack/nextjs-blog/pages/api/v1/sessions.tsx"],"names":["SignIn","Sessions","req","res","username","password","body","setHeader","signIn","validate","hasErrors","statusCode","end","JSON","stringify","errors","user"],"mappings":"AAIA,SAAQA,MAAR,QAAqB,2BAArB;;AAEA,MAAMC,QAAwB,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACnD,QAAM;AAACC,IAAAA,QAAD;AAAWC,IAAAA;AAAX,MAAuBH,GAAG,CAACI,IAAjC;AACAH,EAAAA,GAAG,CAACI,SAAJ,CAAc,cAAd,EAA8B,gCAA9B;AACA,QAAMC,MAAM,GAAG,IAAIR,MAAJ,EAAf;AACAQ,EAAAA,MAAM,CAACJ,QAAP,GAAkBA,QAAlB;AACAI,EAAAA,MAAM,CAACH,QAAP,GAAkBA,QAAlB;AACA,QAAMG,MAAM,CAACC,QAAP,EAAN;;AAEA,MAAGD,MAAM,CAACE,SAAP,EAAH,EAAsB;AACpBP,IAAAA,GAAG,CAACQ,UAAJ,GAAiB,GAAjB;AACAR,IAAAA,GAAG,CAACS,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAeN,MAAM,CAACO,MAAtB,CAAR;AACD,GAHD,MAGK;AACHZ,IAAAA,GAAG,CAACQ,UAAJ,GAAiB,GAAjB;AACAR,IAAAA,GAAG,CAACS,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAeN,MAAM,CAACQ,IAAtB,CAAR;AACD;AACF,CAfD;;AAiBA,eAAef,QAAf","sourcesContent":["import {NextApiHandler} from 'next';\r\nimport {getDatabaseConnection} from '../../../lib/getDatabaseConnection';\r\nimport {User} from 'src/entity/User';\r\nimport md5 from 'md5';\r\nimport {SignIn} from '../../../src/model/SignIn';\r\n\r\nconst Sessions: NextApiHandler = async (req, res) => {\r\n  const {username, password} = req.body;\r\n  res.setHeader('Content-Type', 'application/json;charset=utf-8');\r\n  const signIn = new SignIn()\r\n  signIn.username = username\r\n  signIn.password = password\r\n  await signIn.validate()\r\n\r\n  if(signIn.hasErrors()){\r\n    res.statusCode = 422;\r\n    res.end(JSON.stringify(signIn.errors));\r\n  }else{\r\n    res.statusCode = 200;\r\n    res.end(JSON.stringify(signIn.user));\r\n  }\r\n};\r\n\r\nexport default Sessions;\r\n"]},"metadata":{},"sourceType":"module"}