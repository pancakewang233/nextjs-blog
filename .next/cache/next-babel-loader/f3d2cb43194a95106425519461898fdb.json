{"ast":null,"code":"var _jsxFileName = \"D:\\\\Pank\\\\code\\\\Pack\\\\nextjs-blog\\\\pages\\\\index.tsx\";\nvar __jsx = React.createElement;\nimport { UAParser } from 'ua-parser-js';\nimport React from 'react';\nimport { getDatabaseConnection } from '../lib/getDatabaseConnection';\nimport Link from 'next/link';\n\nconst Index = props => {\n  const {\n    posts\n  } = props;\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }\n  }, \"\\u6587\\u7AE0\\u5217\\u8868\"), posts.map(post => __jsx(Link, {\n    href: \"\",\n    key: post.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 9\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 11\n    }\n  }, post.title))));\n};\n\nexport default Index;\nexport const getServerSideProps = async context => {\n  const connection = await getDatabaseConnection();\n  const posts = await connection.manager.find('Post');\n  const ua = context.req.headers['user-agent'];\n  const result = new UAParser(ua).getResult();\n  return {\n    props: {\n      browser: result.browser,\n      posts: JSON.parse(JSON.stringify(posts))\n    }\n  };\n};","map":{"version":3,"sources":["D:/Pank/code/Pack/nextjs-blog/pages/index.tsx"],"names":["UAParser","React","getDatabaseConnection","Link","Index","props","posts","map","post","id","title","getServerSideProps","context","connection","manager","find","ua","req","headers","result","getResult","browser","JSON","parse","stringify"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,cAAzB;AAEA,OAAOC,KAAP,MAA2C,OAA3C;AACA,SAAQC,qBAAR,QAAoC,8BAApC;AAEA,OAAOC,IAAP,MAAiB,WAAjB;;AAMA,MAAMC,KAAqB,GAAIC,KAAD,IAAW;AACvC,QAAM;AAAEC,IAAAA;AAAF,MAAWD,KAAjB;AACA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,EAEGC,KAAK,CAACC,GAAN,CAAUC,IAAI,IACb,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,EAAX;AAAe,IAAA,GAAG,EAAEA,IAAI,CAACC,EAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,IAAI,CAACE,KADR,CADF,CADD,CAFH,CADF;AAWD,CAbD;;AAcA,eAAeN,KAAf;AAEA,OAAO,MAAMO,kBAAsC,GAAG,MAAOC,OAAP,IAAiB;AACrE,QAAMC,UAAU,GAAG,MAAMX,qBAAqB,EAA9C;AACA,QAAMI,KAAK,GAAG,MAAMO,UAAU,CAACC,OAAX,CAAmBC,IAAnB,CAAwB,MAAxB,CAApB;AACA,QAAMC,EAAE,GAAGJ,OAAO,CAACK,GAAR,CAAYC,OAAZ,CAAoB,YAApB,CAAX;AACA,QAAMC,MAAM,GAAG,IAAInB,QAAJ,CAAagB,EAAb,EAAiBI,SAAjB,EAAf;AACA,SAAO;AACLf,IAAAA,KAAK,EAAE;AACLgB,MAAAA,OAAO,EAAEF,MAAM,CAACE,OADX;AAELf,MAAAA,KAAK,EAAEgB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAelB,KAAf,CAAX;AAFF;AADF,GAAP;AAMD,CAXM","sourcesContent":["import { UAParser } from 'ua-parser-js';\nimport { GetServerSideProps, NextPage } from 'next';\nimport React, { useEffect, useState } from 'react';\nimport {getDatabaseConnection} from '../lib/getDatabaseConnection';\nimport { Post } from 'src/entity/Post';\nimport Link from 'next/link';\n\ntype Props = {\n  posts: Post[],\n}\n\nconst Index:NextPage<Props> = (props) => {\n  const { posts} = props\n  return (\n    <div>\n      <h1>文章列表</h1>\n      {posts.map(post =>\n        <Link href=\"\"  key={post.id}>\n          <a>\n            {post.title}\n          </a>\n        </Link>)}\n    </div>\n  )\n}\nexport default Index;\n\nexport const getServerSideProps: GetServerSideProps = async (context)=>{\n  const connection = await getDatabaseConnection()\n  const posts = await connection.manager.find('Post')\n  const ua = context.req.headers['user-agent']\n  const result = new UAParser(ua).getResult()\n  return {\n    props: {\n      browser: result.browser,\n      posts: JSON.parse(JSON.stringify(posts))\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}